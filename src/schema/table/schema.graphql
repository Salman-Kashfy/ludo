enum TableStatus {
    available
    occupied
    reserved
}

type Table {
    uuid: ID!
    name: String!
    categoryUuid: ID!
    status: TableStatus!
    sortNo: Int
    category: Category!
    tableSessions: [TableSession]
}

#------------------------
# Query
#------------------------
extend type Query {
    table(uuid: ID!): TablePayload @requireAuth @requirePermissions(permissions: ["table:view"])
    tables(params: TableFilter): TablesPayload! @requireAuth @requirePermissions(permissions: ["table:view"])
}

#------------------------
# Schema mutations
#------------------------
extend type Mutation {
    saveTable(input: SaveTableInput!): SaveTablePayload @requireAuth @requirePermissions(permissions: ["table:upsert"])
    updateTableStatus(input: UpdateTableStatusInput!): SaveTablePayload @requireAuth @requirePermissions(permissions: ["table:update"])
}

#------------------------
# Query types
#------------------------
input TableFilter {
    searchText: String
    companyUuid: ID!
    categoryUuid: ID
    status: TableStatus
}
type TablePayload {
    data: Table
    errors: [GlobalError]
    status: Boolean
    errorMessage: String
}
type TablesPayload {
    data: [Table]
    errors: [GlobalError]
    status: Boolean
    errorMessage: String
}

#------------------------
# Mutations types
#------------------------

input SaveTableInput {
    uuid: ID
    name: String!
    categoryUuid: ID!
    status: TableStatus
    companyUuid: ID!
    sortNo: Int
}

input UpdateTableStatusInput {
    id: ID!
    status: TableStatus!
}

type SaveTablePayload {
    data: Table
    errors: GlobalError
    status: Boolean
    errorMessage: String
}
